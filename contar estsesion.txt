--//////////////////////////////////////////////////////////////////////////
--// Control de tiempo para una sentencia
--//////////////////////////////////////////////////////////////////////////
select to_char(sysdate, 'dd/mm/yyyy hh24 mi ss') from dual;
--Escribir sentencia
select to_char(sysdate, 'dd/mm/yyyy hh24 mi ss') from dual;

--//////////////////////////////////////////////////////////////////////////
--// Espacio libre en cada tablespace
--//////////////////////////////////////////////////////////////////////////

select tablespace_name, sum(bytes) AS Libre
from dba_free_space 
group by tablespace_name;

--//////////////////////////////////////////////////////////////////////////
--// Registros de fn2estimationdetail24
--//////////////////////////////////////////////////////////////////////////
select to_char(sysdate, 'dd/mm/yyyy hh24 mi ss') from dual;
select substr(estsession,1,30), count (estsession)
from fn2estimationdetail24
group by estsession;
select to_char(sysdate, 'dd/mm/yyyy hh24 mi ss') from dual; 


--//////////////////////////////////////////////////////////////////////////
--// Control de tamaño de las tablas e índices
--//////////////////////////////////////////////////////////////////////////

Select *
From user_segments
order by bytes desc;

--//////////////////////////////////////////////////////////////////////////
--// Control de tamaño de las tablas
--//////////////////////////////////////////////////////////////////////////

Select *
From user_segments
Where segment_type = 'TABLE'
order by bytes desc

--//////////////////////////////////////////////////////////////////////////
--// Control de tamaño de los índices
--//////////////////////////////////////////////////////////////////////////

Select substr(segment_name,1,20), substr(tablespace_name,1,20)
From user_segments
Where segment_type = 'INDEX'
order by segment_name;

--//////////////////////////////////////////////////////////////////////////
--// Información de los segmentos de rollback
--//////////////////////////////////////////////////////////////////////////

Select *
From dba_rollback_segs;

--//////////////////////////////////////////////////////////////////////////
--// Cambio de Tablespace para un indice
--//////////////////////////////////////////////////////////////////////////

--Alter Index rebuilt (...) tablespace MARCA_IDX;

--//////////////////////////////////////////////////////////////////////////
--// Añadir una foreign jey a una tabla que ya existe
--//////////////////////////////////////////////////////////////////////////

ALTER TABLE "FORMARCA"."FN2FORECAST" ADD(CONSTRAINT "FK_FORSESION"
FOREIGN KEY("FORSESSION") REFERENCES
"FORMARCA"."FN2FORSESSION"("CODIGO"))